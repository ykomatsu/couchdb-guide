<title>JSON入門</title>

<meta charset="utf-8">

<link rel="stylesheet" href="../../../style.css">

<link rel="prev" href="source.html">

<link rel="next" href="btree.html">

<script src="../../../script.js"></script>

<h2 id="json">JSON入門</h2>

<p>CouchDBは<em>JavaScript Object Notation</em>（JSON）という、JavaScriptの構文のサブセットを基にした軽量フォーマットをデータストレージに使用しています。JSONの最も良い点として、XMLのようなものと比べて、手作業での読み書きがずっと簡単であることであることが挙げられます。JSONはJavaScriptと同じ構文を利用しているので、当然JavaScriptで解析することができます。この点は、動的なウェブアプリケーションを構築するときや、サーバーからデータを取得するときに本当に役立ちます。

<p>以下にJSONによるドキュメントの例を示します。

<pre>
{
    "Subject": "I like Plankton",
    "Author": "Rusty",
    "PostedDate": "2006-08-15T17:30:12-04:00",
    "Tags": [
        "plankton",
        "baseball",
        "decisions"
    ],
    "Body": "I decided today that I don't like baseball. I like plankton."
}
</pre>

<p>JSONの一般的な構造は、キーと値のペアとリストを基礎にしていることが分かります。

<h3 id="types">データ型</h3>

<p>JSONでは、いくつかの基本的なデータ型を使用することができます。ここでは、それらのすべてをカバーしたいと思います。

<h4 id="numbers">数値</h4>

<p>正の整数を使うことができます。<code>"Count": 253</code>

<p>負の整数も使うことができます。<code>"Score": -19</code>

<p>浮動小数点数を使うこともできます。<code>"Area": 456.31</code>

<div class="aside warning">

<p>浮動小数点数と10進数との間には、微妙ですが重要な違いがあります。<code>15.7</code>という数値を使う場合、これをほとんどのクライアントは<code>15.699999999999999</code>と解釈します。このことはアプリケーションにとって問題となるかも知れません。このような理由から、JSONでは通常、通貨の値については文字列として表現する方が良いといえます。<code>"15.7"</code>という文字列は、どのJSONクライアントも<code>"15.7"</code>と解釈します。

</div>

<p>指数表記を使うこともできます。<code>"Density": 5.6e+24</code>

<h4 id="strings">文字列</h4>

<p>文字列を値として使うことができます。

<pre>
"Author": "Rusty"
</pre>

<p>タブや改行など、いくつかの特殊な文字はエスケープしなければなりません。

<pre>
"poem": "May I compare thee to some\n\tsalty plankton."
</pre>

<p><a href="http://www.json.org">JSONのサイト</a>には、どの文字列をエスケープしなければならないかについての詳細が掲載されています。

<h4 id="booleans">真偽値</h4>

<p>ブール値のtrueを使うことができます。

<pre>
"Draft": true
</pre>

<p>ブール値のfalseを使うこともできます。

<pre>
"Draft": false
</pre>

<h4 id="arrays">配列</h4>

<p>配列は値のリストです。

<pre>
"Tags": ["plankton", "baseball", "decisions"]
</pre>

<p>配列にはどんなデータ型でも入れることができます。配列に配列を入れることもできます。

<pre>
"Context": ["dog", [1, true], {"Location": "puddle"}]
</pre>

<h4 id="objects">オブジェクト</h4>

<p>オブジェクトはキーと値のペアのリストです。

<pre>
{"Subject": "I like Plankton", "Author": "Rusty"}
</pre>

<h4 id="nulls">null</h4>

<p>null値を使うことができます。

<pre>
"Surname": null
</pre>
